THREE.OBJMTLLoader=function(){},THREE.OBJMTLLoader.prototype={constructor:THREE.OBJMTLLoader,load:function(e,t,r){var a=this,s=new THREE.MTLLoader(e.substr(0,e.lastIndexOf("/")+1));s.load(t,function(t){var s=t;s.preload();var n=new THREE.XHRLoader(a.manager);n.setCrossOrigin(this.crossOrigin),n.load(e,function(e){var t=a.parse(e);t.traverse(function(e){if(e instanceof THREE.Mesh&&e.material.name){var t=s.create(e.material.name);t&&(e.material=t)}}),r(t)})})},parse:function(e,t){function r(e,t,r){return new THREE.Vector3(e,t,r)}function a(e,t){return new THREE.Vector2(e,t)}function s(e,t,r,a){return new THREE.Face3(e,t,r,a)}function n(e,t){l.vertices.length>0&&(l.mergeVertices(),l.computeCentroids(),l.computeFaceNormals(),l.computeBoundingSphere(),i.add(c),l=new THREE.Geometry,c=new THREE.Mesh(l,o),f=0),void 0!==e&&(c.name=e),void 0!==t&&(o=new THREE.MeshLambertMaterial,o.name=t,c.material=o)}e=e.replace(/\ \\\r\n/g,"");var d="/f$1$2$4\n/f$2$3$4";e=e.replace(/f( +\d+)( +\d+)( +\d+)( +\d+)/g,d),e=e.replace(/f( +\d+\/\d+)( +\d+\/\d+)( +\d+\/\d+)( +\d+\/\d+)/g,d),e=e.replace(/f( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)/g,d),e=e.replace(/f( +\d+\/\/\d+)( +\d+\/\/\d+)( +\d+\/\/\d+)( +\d+\/\/\d+)/g,d);for(var p=new THREE.Object3D,i=p,l=new THREE.Geometry,o=new THREE.MeshLambertMaterial,c=new THREE.Mesh(l,o),u=[],f=0,E=[],v=[],h=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,m=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,T=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,I=/f( +\d+)( +\d+)( +\d+)/,H=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))/,R=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))/,g=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))/,L=e.split("\n"),w=0;w<L.length;w++){var M=L[w];M=M.trim();var b;if(0!==M.length&&"#"!==M.charAt(0))if(null!==(b=h.exec(M)))u.push(r(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3])));else if(null!==(b=m.exec(M)))E.push(r(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3])));else if(null!==(b=T.exec(M)))v.push(a(parseFloat(b[1]),parseFloat(b[2])));else if(null!==(b=I.exec(M)))l.vertices.push(u[parseInt(b[1])-1],u[parseInt(b[2])-1],u[parseInt(b[3])-1]),l.faces.push(s(f++,f++,f++));else if(null!==(b=H.exec(M)))l.vertices.push(u[parseInt(b[2])-1],u[parseInt(b[5])-1],u[parseInt(b[8])-1]),l.faces.push(s(f++,f++,f++)),l.faceVertexUvs[0].push([v[parseInt(b[3])-1],v[parseInt(b[6])-1],v[parseInt(b[9])-1]]);else if(null!==(b=R.exec(M)))l.vertices.push(u[parseInt(b[2])-1],u[parseInt(b[6])-1],u[parseInt(b[10])-1]),l.faces.push(s(f++,f++,f++,[E[parseInt(b[4])-1],E[parseInt(b[8])-1],E[parseInt(b[12])-1]])),l.faceVertexUvs[0].push([v[parseInt(b[3])-1],v[parseInt(b[7])-1],v[parseInt(b[11])-1]]);else if(null!==(b=g.exec(M)))l.vertices.push(u[parseInt(b[2])-1],u[parseInt(b[5])-1],u[parseInt(b[8])-1]),l.faces.push(s(f++,f++,f++,[E[parseInt(b[3])-1],E[parseInt(b[6])-1],E[parseInt(b[9])-1]]));else if(/^o /.test(M))i=new THREE.Object3D,i.name=M.substring(2).trim(),p.add(i);else if(/^g /.test(M))n(M.substring(2).trim(),void 0);else if(/^usemtl /.test(M))n(void 0,M.substring(7).trim());else if(/^mtllib /.test(M)){if(t){var x=M.substring(7);x=x.trim(),t(x)}}else/^s /.test(M)||console.log("THREE.OBJMTLLoader: Unhandled line "+M)}return n(void 0,void 0),p}},THREE.EventDispatcher.prototype.apply(THREE.OBJMTLLoader.prototype);