THREE.SoftwareRenderer=function(){function e(e){var a=e.id,r=z[a];if(void 0===z[a]){if(e instanceof THREE.MeshBasicMaterial||e instanceof THREE.MeshLambertMaterial||e instanceof THREE.MeshPhongMaterial){var t;t=e.vertexColors===THREE.FaceColors?["buffer[ offset ] = face.color.r * 255;","buffer[ offset + 1 ] = face.color.g * 255;","buffer[ offset + 2 ] = face.color.b * 255;","buffer[ offset + 3 ] = material.opacity * 255;"].join("\n"):["buffer[ offset ] = material.color.r * 255;","buffer[ offset + 1 ] = material.color.g * 255;","buffer[ offset + 2 ] = material.color.b * 255;","buffer[ offset + 3 ] = material.opacity * 255;"].join("\n"),r=new Function("buffer, offset, u, v, face, material",t)}else{var t=["buffer[ offset ] = u * 255;","buffer[ offset + 1 ] = v * 255;","buffer[ offset + 2 ] = 0;","buffer[ offset + 3 ] = 255;"].join("\n");r=new Function("buffer, offset, u, v",t)}z[a]=r}return r}function a(e,a,t,n,m,E){if(!(e.z<-1||e.z>1||a.z<-1||a.z>1||t.z<-1||t.z>1)){var R=0|e.x*s+l,d=0|a.x*s+l,z=0|t.x*s+l,C=0|e.y*c+v,A=0|a.y*c+v,D=0|t.y*c+v,P=0|e.z*h+u,V=0|a.z*h+u,B=0|t.z*h+u,L=R-d,N=A-C,O=d-z,U=D-A,q=z-R,G=C-D,J=Math.max(Math.min(R,d,z)+H>>p,0),K=Math.min(Math.max(R,d,z)+H>>p,f),Q=Math.max(Math.min(C,A,D)+H>>p,0),W=Math.min(Math.max(C,A,D)+H>>p,o);I=Math.min(J,I),F=Math.max(K,F),j=Math.min(Q,j),k=Math.max(W,k);var X=y;J&=~(X-1),Q&=~(X-1);var Y=N*((J<<p)-R)+L*((Q<<p)-C),Z=U*((J<<p)-d)+O*((Q<<p)-A),$=G*((J<<p)-z)+q*((Q<<p)-D);(N>0||0==N&&L>0)&&Y++,(U>0||0==U&&O>0)&&Z++,(G>0||0==G&&q>0)&&$++,Y=Y-1>>p,Z=Z-1>>p,$=$-1>>p;var _=P-V,ea=B-P,aa=1/(L*G-q*N),ra=aa*(_*G-ea*N),ta=aa*(_*q-L*ea),fa=0|P+((J<<p)-R)*ra+((Q<<p)-C)*ta,oa=1<<p;ra=0|ra*oa,ta=0|ta*oa;var ia=X-1,na=0,sa=0,ca=0,ha=0,la=0,va=0,ua=0,ma=0;L>=0?sa-=ia*L:na-=ia*L,N>=0?sa-=ia*N:na-=ia*N,O>=0?ha-=ia*O:ca-=ia*O,U>=0?ha-=ia*U:ca-=ia*U,q>=0?va-=ia*q:la-=ia*q,G>=0?va-=ia*G:la-=ia*G,ra>=0?ma+=ia*ra:ua+=ia*ra,ta>=0?ma+=ia*ta:ua+=ia*ta;for(var Ma=f-X,ba=1/(Y+Z+$),Ea=Y,xa=Z,ga=$,Ra=fa,da=-X,za=da*N,wa=da*U,Ta=da*G,pa=da*ra,Ha=J,Sa=Q;W>Sa;Sa+=X){for(;Ha>=J&&K>Ha&&Ea>=sa&&xa>=ha&&ga>=va;)Ha+=da,Ea+=za,xa+=wa,ga+=Ta,Ra+=pa;for(da=-da,za=-za,wa=-wa,Ta=-Ta,pa=-pa;;){if(Ha+=da,Ea+=za,xa+=wa,ga+=Ta,Ra+=pa,J>Ha||Ha>=K)break;if(sa>Ea){if(0>za)break}else if(ha>xa){if(0>wa)break}else if(va>ga){if(0>Ta)break}else{var ya=Ha>>S,Ca=Sa>>S,Ia=ya+Ca*i,ja=Ra+ua;if(!(x[Ia]<ja)){var Fa=g[Ia];Fa&T&&r(ya,Ca),g[Ia]=Fa&~(w|T);var ka=Ha+Sa*f;if(Ea>=na&&xa>=ca&&ga>=la){var Aa=Ra+ma;x[Ia]=Math.min(x[Ia],Aa);for(var Da=Ea,Pa=xa,Va=Ra,Ba=0;X>Ba;Ba++){for(var La=Da,Na=Pa,Oa=Va,Ua=0;X>Ua;Ua++){var qa=Oa;if(qa<b[ka]){b[ka]=qa;var Ga=La*ba,Ja=Na*ba;n(M,4*ka,Ga,Ja,m,E)}La+=N,Na+=U,Oa+=ra,ka++}Da+=L,Pa+=O,Va+=ta,ka+=Ma}}else for(var Da=Ea,Pa=xa,Ka=ga,Va=Ra,Ba=0;X>Ba;Ba++){for(var La=Da,Na=Pa,Qa=Ka,Oa=Va,Ua=0;X>Ua;Ua++){if((La|Na|Qa)>=0){var qa=Oa;if(qa<b[ka]){var Ga=La*ba,Ja=Na*ba;b[ka]=qa,n(M,4*ka,Ga,Ja,m,E)}}La+=N,Na+=U,Qa+=G,Oa+=ra,ka++}Da+=L,Pa+=O,Ka+=q,Va+=ta,ka+=Ma}}}}Ea+=X*L,xa+=X*O,ga+=X*q,Ra+=X*ta}}}function r(e,a){for(var r=e*y+a*y*f,t=4*r+3,o=f-y,i=4*o,n=0;y>n;n++){for(var s=0;y>s;s++)b[r]=C,M[t]=0,r++,t+=4;r+=o,t+=i}}function t(){for(var e=0,a=0;n>a;a++)for(var t=0;i>t;t++)g[e]&T&&(r(t,a),g[e]=w),e++}console.log("THREE.SoftwareRenderer",THREE.REVISION);var f,o,i,n,s,c,h,l,v,u,m,M,b,E,x,g,R=document.createElement("canvas"),d=R.getContext("2d"),z={},w=1,T=2,p=4,H=(1<<p)-1,S=3,y=1<<S,C=1<<24,I=1/0,j=1/0,F=0,k=0,A=1/0,D=1/0,P=0,V=0,B=new THREE.Projector;this.domElement=R,this.autoClear=!0,this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setClearColor=function(){},this.setSize=function(e,a){i=Math.floor(e/y),n=Math.floor(a/y),f=i*y,o=n*y;var r=1<<p;s=r*f/2,c=-r*o/2,h=C/2,l=r*f/2+.5,v=r*o/2+.5,u=C/2+.5,R.width=f,R.height=o,m=d.getImageData(0,0,f,o),M=m.data,b=new Int32Array(M.length/4),E=i*n,x=new Int32Array(E),g=new Uint8Array(E);for(var t=0,z=b.length;z>t;t++)b[t]=C;for(var t=0;E>t;t++)g[t]=w},this.setSize(R.width,R.height),this.clear=function(){I=1/0,j=1/0,F=0,k=0;for(var e=0;E>e;e++)x[e]=C,g[e]=g[e]&w?w:T},this.render=function(r,f){this.autoClear===!0&&this.clear();for(var o=B.projectScene(r,f),i=o.elements,n=0,s=i.length;s>n;n++){var c=i[n],h=c.material,l=e(h);c instanceof THREE.RenderableFace3&&a(c.v1.positionScreen,c.v2.positionScreen,c.v3.positionScreen,l,c,h)}t();var v=Math.min(I,A),u=Math.min(j,D),M=Math.max(F,P)-v,b=Math.max(k,V)-u;1/0!==v&&d.putImageData(m,0,0,v,u,M,b),A=I,D=j,P=F,V=k}};